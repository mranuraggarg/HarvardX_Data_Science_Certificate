s[(3:36)]
s_slice <- tail(s, -2)
s[(3:35)]
s_slice <- tail(s, -2)
s[(3:4)]
s_slice <- tail(s, -2)
s[(3:7)]
s_slice <- tail(s, -2)
s[(3:6)]
s_slice <- tail(s, -2)
c(s[(3:6)], s[(5:36)])
s_slice <- tail(s, -2)
c(s[(3:6)], s[(8:36)])
s_slice <- tail(s, -2)
c(s[(3:6)], s[(8:9)])
c(s[(3:6)], s[(7:9)])
c(s[(3:6)], s[(6:9)])
c(s[(3:6)], s[(8:9)])
c(s[(3:6)], s[(7:9)])
c(s[(3:6)], s[(8:9)])
c(s[(3:6)], s[(8:33)])
c(s[(3:6)], s[(9:33)])
c(s[(3:6)], s[(7:33)])
c(s[(3:6)], s[(8:33)])
c(s[(3:6)], s[(8:10)])
c(s[(3:6)], s[(7:10)])
c(s[(3:6)], s[(9:10)])
c(s[(3:6)], s[(10:11)])
c(s[(3:6)])
c(s[(3:6)], s[[8]])
c(s[(3:7)], s[[8]])
c(s[(3:6)], s[[8]])
c(s[(3:6)], s[[8]], s[[9]])
c(s[(3:6)], s[[8]], s[[9:]])
c(s[(3:6)], s[[8]], s[(9:20)])
c(s[(3:6)], s[[8]], s[[9]])
c(s[(3:6)], s[[8]], s[[9:10]])
c(s[(3:6)], s[[8]], s[[9]])
c(s[(3:6)], s[[8]], s[[9]], s[[10]])
c(s[(3:6)], s[(8:9)])
c(s[(3:6)], s[(8:9)], s[[11]])
c(s[(3:6)], s[(8:9)], s[[11:20]])
c(s[(3:6)], s[(8:9)], s[(11:20)])
c(s[(3:6)], s[(8:9)], s[(11:33)])
c(s[(3:6)], s[(8:9)], s[(11:34)])
c(s[(3:6)], s[(8:9)], s[(11:36)])
c(s[(3:6)], s[(8:9)], s[(11:35)])
c(s[(4:6)], s[(8:9)], s[(11:35)])
s_trim <- c(s[(4:6)], s[(8:9)], s[(11:35)])
length(s_trim)
str_remove_all(s, "[^\\d]")
str_remove_all(s, str_remove_all(s, "[\\d\\s]"))
str_remove_all(s, "[^\\d\\s]")
s_final <- str_remove_all(s_trim, "[^\\d\\s]")
s_final
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
s
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
data.frame(s)
data.frame(s, header = c('day', header_index_list))
data.frame(s)
data.frame(s, header = header_index_list)
df <- data.frame(s)
df
df <- data.frame(s)
s
df <- data.frame(s)
df
df <- data.frame(s)
names(df) <- header_index_list
df <- data.frame(s)
names(df) <- header_index_list
df
df <- data.frame(s)
names(df) <- header_index_list
header_index
df <- data.frame(s)
names(df) <- str_split(header_index, "\\s*")
df
df <- data.frame(s)
names(df) <- str_split(header_index, "\\s+")
df
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
names(df)
df <- data.frame(s[(1:5)])
#names(df) <- str_split(header_index, "\\s+")
names(df)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
names(df)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
names(df)
df
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
names(df)
df
c(c(day), str_split(header_index, "\\s+"))
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
names(df)
df
c(c("day"), str_split(header_index, "\\s+"))
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
c(c("day"), str_split(header_index, "\\s+"))
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
names(df) <- c(c("day"), str_split(header_index, "\\s+"))
names(df)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
colnames(df) <- c(c("day"), str_split(header_index, "\\s+"))
df
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
header_index
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
class(header_index)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
(header_index_list)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
class(header_index_list)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
class(str_split(header_index, "\\s+"))
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
append(str_split(header_index, "\\s+")), 'day', before = 1)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
append(str_split(header_index, "\\s+"), 'day', before = 1)
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
append(str_split(header_index, "\\s+"), 'day')
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(header_index, "\\s+")[[1]]
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(header_index, "\\s+")[[1]][[1]]
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(header_index, "\\s+")[[1]][[2]]
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(header_index, "\\s+")[[1]][[3]]
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
append(str_split(header_index, "\\s+")[[1]], 'day')
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
append('day', str_split(header_index, "\\s+")[[1]])
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
class(append('day', str_split(header_index, "\\s+")[[1]]))
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(append('day', str_split(header_index, "\\s+")[[1]]), '\\s+')
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(append('day', str_split(header_index, "\\s+")[[1]]), '\\s+')[[1]]
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
str_split(append('day', str_split(header_index, "\\s+")[[1]]), '\\s+')[[2]]
df <- data.frame(s)
#names(df) <- str_split(header_index, "\\s+")
#names(df)
#df
colnames(df) <- str_split(append('day', str_split(header_index, "\\s+")[[1]]), '\\s+')
df <- data.frame(s)
names(df) <- str_split(append('day', str_split(header_index, "\\s+")[[1]]), '\\s+')
df <- data.frame(s)
#names(df) <- str_split(append('day', str_split(header_index, "\\s+")[[1]]), '\\s+')
df
df <- data.frame(s)
header
df <- data.frame(s)
class(header)
df <- data.frame(s)
class(str_split(header, '\\s+'))
df <- data.frame(s)
colnames(df) <- str_split(header, '\\s+')
df
df <- data.frame(s)
colnames(df) <- append('day', str_split(header, '\\s+'))
df
df[1]
df[2]
df <- data.frame(s)
df
colnames(df) <- append('day', str_split(header, '\\s+'))
#df
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
s
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:6]
s
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
s
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
df <- data.frame(s)
colnames(df) <- append('day', str_split(header, '\\s+'))
df[3]
mean(df[3])
df %>% select('2015') %>% mean
library(tidyverse)
df %>% select('2015') %>% mean
mean(df$2015)
mean(as.numeric(df$2015))
as.numeric(df$2015)
mean(as.numeric(df$"2015"))
mean(as.numeric(df$"2016"))
df <- data.frame(s)
colnames(df) <- append('day', str_split(header, '\\s+')[(1:3)])
df
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
df
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
df[(1:4)]
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
df[(2:4)]
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
df[(2:5)]
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
df <- df[(2:5)]
mean(as.numeric(df$"2015"))
mean(as.numeric(df$"2016"))
df[1, :]
df[1, (1:5)]
df$"2017"[(1:5)]
df$"2017"[(1:19)]
mean(df$"2017"[(1:19)])
mean(as.numeric(df$"2017"[(1:19)]))
mean(as.numeric(df$"2017"[(20:30)]))
tab <- tab %>% _____(year, deaths, -day) %>%
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
tab <- df[(2:5)]
mean(as.numeric(tab$"2015"))
mean(as.numeric(tab$"2016"))
mean(as.numeric(tab$"2017"[(1:19)]))
mean(as.numeric(tab$"2017"[(20:30)]))
tab1 <- tab %>% separate(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% separate("2015", deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% separate(2015, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% separate(spread, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% unite(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% separate(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% spread(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1 <- tab %>% gather(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab1
tab <- tab %>% gather(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab
library(ggplot2)
tab %>% ggplot(aes(day, deaths), colors(year))
library(ggplot2)
tab %>% ggplot(aes(day, deaths, colors(year))
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, colors(year))
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, colors(year)))
library(ggplot2)
ggplot(tab) +
geom_line(aes(as.numeric(day), as.numeric(deaths), colors(year)))
type(tab$day)
tab$day
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, colors(year)))
as.numeric(tab$day)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, colors(year)))
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, colors(year)))
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths))
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, color = year))
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, color = year)) +
geom_vline(xintercept = 20)
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
tab <- df[(2:5)]
mean(as.numeric(tab$"2015"))
mean(as.numeric(tab$"2016"))
mean(as.numeric(tab$"2017"[(1:19)]))
mean(as.numeric(tab$"2017"[(20:30)]))
#tab$day <- as.numeric(tab$day)
#tab$year <- as.numeric(tab$year)
#tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, color = year)) +
geom_vline(xintercept = 20)
tab$day <- as.numeric(tab$day)
#tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
tab$day <- as.numeric(tab$day)
#tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
tab <- df[(2:5)]
mean(as.numeric(tab$"2015"))
mean(as.numeric(tab$"2016"))
mean(as.numeric(tab$"2017"[(1:19)]))
mean(as.numeric(tab$"2017"[(20:30)]))
tab <- tab %>% gather(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, color = year)) +
geom_vline(xintercept = 20)
fn <- system.file("extdata", "RD-Mortality-Report_2015-18-180531.pdf", package="dslabs")
system2("open", args = fn)
library(pdftools)
txt = pdf_text(fn)
txt[1]
mean(as.numeric(tab$"2017"[(20:30)]))
knitr::opts_chunk$set(echo = TRUE)
fn <- system.file("extdata", "RD-Mortality-Report_2015-18-180531.pdf", package="dslabs")
system2("open", args = fn)
library(pdftools)
txt = pdf_text(fn)
txt[1]
library(stringr)
x <- str_split(txt[9], '\n')
x
class(x)
length(x[[1]])
s <- x[[1]]
class(s)
length(s)
s_trim <- str_trim(s)
s_trim[[1]]
header_index <- s_trim[str_which(s, '2015')[[1]]]
header_index
header_index_list <- str_split(header_index, '     ')[[1]]
month <- header_index_list[[1]]
list1 <- str_split(header_index_list[[2]], '    ')
list2 <- str_split(header_index_list[[3]], '    ')
header <- c(list1[[1]][[1]], list1[[1]][[2]], list2[[1]][[1]], list2[[1]][[2]])
month
header
header[[3]]
tail_index <- str_which(s, "Total")
tail_index
n <- sum(str_detect(s, '\\s{20}\\d{1,10}'))
n
s_trim <- c(s[(4:6)], s[(8:9)], s[(11:35)])
length(s_trim)
s_final <- str_remove_all(s_trim, "[^\\d\\s]")
s_final
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
tab <- df[(2:5)]
mean(as.numeric(tab$"2015"))
mean(as.numeric(tab$"2016"))
mean(as.numeric(tab$"2017"[(1:19)]))
mean(as.numeric(tab$"2017"[(20:30)]))
tab <- tab %>% gather(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, color = year)) +
geom_vline(xintercept = 20)
knitr::opts_chunk$set(echo = TRUE)
fn <- system.file("extdata", "RD-Mortality-Report_2015-18-180531.pdf", package="dslabs")
#system2("open", args = fn)
library(pdftools)
txt = pdf_text(fn)
txt[1]
library(stringr)
x <- str_split(txt[9], '\n')
x
class(x)
length(x[[1]])
s <- x[[1]]
class(s)
length(s)
s_trim <- str_trim(s)
s_trim[[1]]
header_index <- s_trim[str_which(s, '2015')[[1]]]
header_index
header_index_list <- str_split(header_index, '     ')[[1]]
month <- header_index_list[[1]]
list1 <- str_split(header_index_list[[2]], '    ')
list2 <- str_split(header_index_list[[3]], '    ')
header <- c(list1[[1]][[1]], list1[[1]][[2]], list2[[1]][[1]], list2[[1]][[2]])
month
header
header[[3]]
tail_index <- str_which(s, "Total")
tail_index
n <- sum(str_detect(s, '\\s{20}\\d{1,10}'))
n
s_trim <- c(s[(4:6)], s[(8:9)], s[(11:35)])
length(s_trim)
s_final <- str_remove_all(s_trim, "[^\\d\\s]")
s_final
s <- str_split_fixed(s_final, "\\s+", n = 6)[,1:5]
df <- data.frame(s)
colnames(df) <- append(c("", 'day'), str_split(header, '\\s+')[(1:3)])
tab <- df[(2:5)]
mean(as.numeric(tab$"2015"))
mean(as.numeric(tab$"2016"))
mean(as.numeric(tab$"2017"[(1:19)]))
mean(as.numeric(tab$"2017"[(20:30)]))
tab <- tab %>% gather(year, deaths, -day) %>%
mutate(deaths = as.numeric(deaths))
tab
tab$day <- as.numeric(tab$day)
tab$year <- as.numeric(tab$year)
tab$deaths <- as.numeric(tab$deaths)
library(ggplot2)
ggplot(tab) +
geom_line(aes(day, deaths, color = year)) +
geom_vline(xintercept = 20)
setwd("~/OneDrive - НИУ Высшая школа экономики/Documents/EdX/HarvardX_Data_Science_Certificate/6. Data Wrangling/section-4")
