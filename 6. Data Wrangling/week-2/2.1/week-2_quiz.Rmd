---
title: "Week 2 Quiz"
output: html_notebook
---

## Q2
A collaborator sends you a file containing data for three years of average race finish times.

```
age_group,2015,2016,2017
20,3:46,3:22,3:50
30,3:50,3:43,4:43
40,4:39,3:49,4:51
50,4:48,4:59,5:01
```

Reading the above data and converting it to tidy.

We have saved this data to `race_finish.csv`. Reading the CSV file.

```{r}
wide_dat <- read_csv("race_finish.csv")
head(wide_dat)
```

Converting the wide data table to tidy

```{r}
races_dat <- wide_dat %>% 
    pivot_longer(-age_group, names_to = "year", values_to = "Time")
races_dat$year <- as.integer(races_dat$year)
races_dat$age_group <- as.integer(races_dat$age_group)
races_dat
```

## Q6
You have a dataset on U.S. contagious diseases, but it is in the following wide format:

```
state year population HepatitisA Mumps Polio Rubella
Alabama 1990    4040587      86	   19    76    1
Alabama 1991    4066003      39	   14    65    0
Alabama 1992    4097169      35	   12    24    0
Alabama 1993    4133242      40	   22    67    0
Alabama 1994    4173361      72	   12    39    0
Alabama 1995    4216645      75     2    38    0
```

Data saved in `us_disease.tsv`

```{r}
d <- read_csv("us_disease.tsv")
d
```

You want to transform this into a tidy dataset, with each row representing an observation of the incidence of each specific disease (as shown below):

```
state   year  population  disease  count
Alabama 1990	4040587 HepatitisA	86
Alabama 1991	4066003 HepatitisA	39
Alabama 1992	4097169 HepatitisA	35
Alabama 1993	4133242 HepatitisA	40
Alabama 1994	4173361 HepatitisA	72
Alabama 1995	4216645 HepatitisA	75
```

```{r}
d %>%
    pivot_longer(HepatitisA:Rubella, names_to = "disease", values_to = "count")
```

## Q7
Reading races data and converting it to tidy.

```{r}
wide_dat <- read_csv("race_finish.csv")
head(wide_dat)

races_dat <- wide_dat %>% 
    pivot_longer(-age_group, names_to = "year", values_to = "Time")
races_dat
```

Converting races tidy table to wide table, where each year has a separate column.

```{r}
races_dat %>% 
    pivot_wider(names_from = year, values_from = Time)
```

## Q9
A collaborator sends you a file containing data for two years of average race finish times, "times.csv":

```
age_group,2015_time,2015_participants,2016_time,2016_participants
20,3:46,54,3:22,62
30,3:50,60,3:43,58
40,4:39,29,3:49,33
50,4:48,10,4:59,14
```

```{r}
d <- read_csv("times.csv", col_types="dcccc")
d
```

```{r}
d %>%
    pivot_longer(-age_group, names_to = 'key', values_to = 'value') %>%
    separate(col = key, into = c('year', 'variable_name')) %>%
    pivot_wider(names_from = variable_name, values_from = value)
```


# Q11
Importing co2

```{r}
co2_wide <- co2
```


```{r}
co2_wide <- data.frame(matrix(co2, ncol = 12, byrow = TRUE)) %>% 
    setNames(1:12) %>%
    mutate(year = as.character(1959:1997))

head(co2_wide)
```


Converting to tidy form

```{r}
co2_tidy <- pivot_longer(co2_wide, -year, names_to = "month", values_to = "co2")
head(co2_tidy)
```

# Q 13

Use co2_tidy to plot CO2 versus month with a different curve for each year:

```{r}
co2_tidy %>% ggplot(aes(as.numeric(month), co2, color = year)) + geom_line()
```

# Q 14
Load the admissions dataset from dslabs, which contains college admission information for men and women across six majors, and remove the applicants percentage column:

```{r}
library(dslabs)
data(admissions)
dat <- admissions %>% select(-applicants)
```

Your goal is to get the data in the shape that has one row for each major, like this: 

```
major  men   women
A      62    82		
B      63    68		
C      37    34		
D      33    35		
E      28    24		
F       6     7	
```

```{r}
head(dat)
```

Using `pivot_wider`

```{r}
dat_tidy <- pivot_wider(dat, names_from = gender, values_from = admitted)
dat_tidy
```

# Q 15
Now use the admissions dataset to create the object tmp, which has columns major, gender, key and value:

```{r}
tmp <- admissions %>%
  pivot_longer(cols = c(admitted, applicants), names_to = "key", values_to = "value")
tmp
```

Combine the key and gender and create a new column called `column_name` to get a variable with the following values: `admitted_men`, `admitted_women`, `applicants_men`, and `applicants_women`. Save the new data as `tmp2`.

```{r}
tmp2 <- unite(tmp, 'column_name', c(key, gender))
tmp2
```


## Q 16
Which function can reshape `tmp2` to a table with six rows and five columns named `major`, `admitted_men`, `admitted_women`, `applicants_men`, and `applicants_women`?

Converting tidy to wide tade

```{r}
tmp3 <- pivot_wider(tmp2, names_from = column_name, values_from = value)
tmp3
```

